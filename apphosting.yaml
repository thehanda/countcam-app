
# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Force rebuild: 2024-06-18T13:00:00Z

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  # Set timeout for request handling (in seconds).
  # Video processing can take time. Default is 60s. Max is 3600s.
  timeoutSeconds: 360 # 6 minutes

# buildSteps:
#   - run: npm install -g firebase-tools
#   - run: firebase deploy --only hosting

# headers:
#   - source: /api/**
#     headers:
#       - key: Access-Control-Allow-Origin
#         value: '*'
#       - key: Access-Control-Allow-Methods
#         value: GET,POST,PUT,DELETE,OPTIONS
#       - key: Access-Control-Allow-Headers
#         value: Content-Type,Authorization
#       - key: Access-Control-Allow-Credentials
#         value: 'true'
#   - source: /**
#     headers:
#       - key: Access-Control-Allow-Origin
#         value: '*'
#       - key: Access-Control-Allow-Methods
#         value: GET,POST,PUT,DELETE,OPTIONS
#       - key: Access-Control-Allow-Headers
#         value: Content-Type,Authorization
#       - key: Access-Control-Allow-Credentials
#         value: 'true'

# 環境変数を設定
env:
  # GOOGLE_API_KEY という名前の環境変数として、アプリ内で利用できるようにする
  - variable: GOOGLE_API_KEY
    # Secret Managerに保管したシークレットを参照する
    # 'YOUR_PROJECT_ID' の部分を、あなたの実際のプロジェクトIDに置き換えてください
    secret: 'projects/countcam-z8573/secrets/countcam-google-api-key/versions/latest'
  - variable: GENKIT_ENV
    value: "prod"
    # All permissions set. Ready for final deploy.

