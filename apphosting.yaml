
# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  # Set timeout for request handling (in seconds).
  # Video processing can take time. Default is 60s. Max is 3600s.
  timeoutSeconds: 360 # 6 minutes

# buildSteps:
#   - run: npm install -g firebase-tools
#   - run: firebase deploy --only hosting

# headers:
#   - source: /api/**
#     headers:
#       - key: Access-Control-Allow-Origin
#         value: '*'
#       - key: Access-Control-Allow-Methods
#         value: GET,POST,PUT,DELETE,OPTIONS
#       - key: Access-Control-Allow-Headers
#         value: Content-Type,Authorization
#       - key: Access-Control-Allow-Credentials
#         value: 'true'
#   - source: /**
#     headers:
#       - key: Access-Control-Allow-Origin
#         value: '*'
#       - key: Access-Control-Allow-Methods
#         value: GET,POST,PUT,DELETE,OPTIONS
#       - key: Access-Control-Allow-Headers
#         value: Content-Type,Authorization
#       - key: Access-Control-Allow-Credentials
#         value: 'true'

env:
  - variable: GOOGLE_API_KEY
    # IMPORTANT: Replace the following 'secret' value with the actual Resource ID of the secret you created in Google Cloud Secret Manager.
    # It should look like: projects/YOUR_PROJECT_NUMBER/secrets/YOUR_SECRET_NAME/versions/latest
    # For example: projects/123456789012/secrets/google-ai-api-key/versions/latest
    secret: "projects/YOUR_PROJECT_NUMBER/secrets/YOUR_SECRET_NAME/versions/latest"
  # You can add other environment variables here if needed, for example:
  # - variable: FIREBASE_API_KEY
  #   value: "YOUR_FIREBASE_API_KEY_IF_NEEDED_BY_APP_LOGIC" # Only if your application code specifically needs it server-side
  - variable: GENKIT_ENV
    value: "prod"
# 環境変数を設定
env:
  # GOOGLE_API_KEY という名前の環境変数として、アプリ内で利用できるようにする
  - variable: GOOGLE_API_KEY
    # Secret Managerに保管したシークレットを参照する
    # 'YOUR_PROJECT_ID' の部分を、あなたの実際のプロジェクトIDに置き換えてください
    secret: 'projects/countcam-z8573/secrets/countcam-google-api-key/versions/latest'